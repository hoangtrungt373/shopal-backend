drop table if exists auth.SHOPAL_TOKEN;
drop table if exists auth.SHOPAL_USER;

drop schema if exists auth;
-----------------------------------------------

go
create schema auth

create table auth.SHOPAL_USER (
	SHOPAL_USER_ID INT NOT NULL IDENTITY,
	USERNAME VARCHAR(255),
	EMAIL VARCHAR(255) NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
	ROLE VARCHAR(20) NOT NULL,

	CONSTRAINT PK_SHOPAL_USER PRIMARY KEY (SHOPAL_USER_ID)
)

create table auth.SHOPAL_TOKEN (
	SHOPAL_TOKEN_ID INT NOT NULL IDENTITY,
	TOKEN VARCHAR(255) NOT NULL,
	TYPE VARCHAR(20) NOT NULL,
	REVOKED BIT NOT NULL,
	EXPIRED BIT NOT NULL,
	SHOPAL_USER_ID INT NOT NULL,

	CONSTRAINT PK_SHOPAL_TOKEN PRIMARY KEY (SHOPAL_TOKEN_ID),
	CONSTRAINT FK_SHOPAL_TOKEN_SHOPAL_USER FOREIGN KEY (SHOPAL_USER_ID) REFERENCES auth.SHOPAL_USER (SHOPAL_USER_ID)
)
